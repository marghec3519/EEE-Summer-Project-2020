Version 4
SHEET 1 3196 1060
WIRE -1984 -16 -2544 -16
WIRE -1600 -16 -1808 -16
WIRE -1552 -16 -1600 -16
WIRE -1456 -16 -1472 -16
WIRE -1600 0 -1600 -16
WIRE 1696 32 -144 32
WIRE -1808 48 -1808 -16
WIRE -1776 48 -1808 48
WIRE -960 48 -1168 48
WIRE -1600 64 -1712 64
WIRE -688 64 -752 64
WIRE -544 64 -608 64
WIRE -2832 80 -2864 80
WIRE -2736 80 -2832 80
WIRE -2416 80 -2512 80
WIRE -2400 80 -2416 80
WIRE -1776 80 -1792 80
WIRE 2384 80 1856 80
WIRE -1984 96 -1984 64
WIRE -2832 112 -2832 80
WIRE -2832 112 -3184 112
WIRE -1168 128 -1168 48
WIRE -1104 128 -1168 128
WIRE -960 144 -960 48
WIRE -960 144 -1040 144
WIRE -848 144 -960 144
WIRE -752 144 -752 64
WIRE -752 144 -768 144
WIRE -688 144 -752 144
WIRE -2736 160 -2832 160
WIRE -2448 160 -2512 160
WIRE -2400 160 -2448 160
WIRE -2320 160 -2400 160
WIRE -1376 160 -1376 -16
WIRE -1104 160 -1376 160
WIRE -544 160 -544 64
WIRE -544 160 -624 160
WIRE -512 160 -544 160
WIRE 2224 160 1936 160
WIRE -688 176 -736 176
WIRE -1984 192 -1984 176
WIRE -1792 192 -1792 80
WIRE -1792 192 -1984 192
WIRE -1984 208 -1984 192
WIRE -1984 208 -2016 208
WIRE 928 208 400 208
WIRE 2384 208 2384 80
WIRE 2384 208 2288 208
WIRE 1936 224 1936 160
WIRE -2736 240 -2832 240
WIRE -2320 240 -2512 240
WIRE -736 240 -736 176
WIRE 2288 240 2288 208
WIRE 2288 240 2272 240
WIRE 2528 256 2224 256
WIRE -2832 272 -2832 240
WIRE -2320 272 -2320 240
WIRE 1184 272 976 272
WIRE -2448 288 -2448 160
WIRE 768 288 480 288
WIRE 1456 288 1392 288
WIRE 1600 288 1536 288
WIRE -1632 336 -1824 336
WIRE -1600 336 -1632 336
WIRE -1472 336 -1520 336
WIRE -1376 336 -1376 160
WIRE -1376 336 -1392 336
WIRE 928 336 928 208
WIRE 928 336 832 336
WIRE 1696 336 1696 32
WIRE 1856 336 1856 80
WIRE 1856 336 1776 336
WIRE 480 352 480 288
WIRE 976 352 976 272
WIRE 1040 352 976 352
WIRE -3184 368 -3184 112
WIRE -3184 368 -3280 368
WIRE -1632 368 -1632 336
WIRE 832 368 832 336
WIRE 832 368 816 368
WIRE 1184 368 1184 272
WIRE 1184 368 1104 368
WIRE 1296 368 1184 368
WIRE 1392 368 1392 288
WIRE 1392 368 1376 368
WIRE 1456 368 1392 368
WIRE -2448 384 -2448 352
WIRE -2320 384 -2320 352
WIRE 1040 384 768 384
WIRE 1600 384 1600 288
WIRE 1600 384 1520 384
WIRE 1936 384 1936 304
WIRE 1936 384 1600 384
WIRE 2224 384 2224 336
WIRE -2832 400 -2832 352
WIRE 1456 400 1408 400
WIRE -3184 416 -3184 368
WIRE -1824 416 -1824 336
WIRE -1776 416 -1824 416
WIRE -832 416 -1184 416
WIRE -1632 432 -1712 432
WIRE -1776 448 -2416 448
WIRE -1184 464 -1184 416
WIRE -1104 464 -1184 464
WIRE 240 464 160 464
WIRE 400 464 400 208
WIRE 400 464 320 464
WIRE 1408 464 1408 400
WIRE -832 480 -832 416
WIRE -832 480 -1040 480
WIRE -816 480 -832 480
WIRE -144 480 -144 32
WIRE -144 480 -816 480
WIRE -1376 496 -1376 336
WIRE -1104 496 -1376 496
WIRE 768 512 768 464
WIRE -2160 576 -2192 576
WIRE -2080 576 -2160 576
WIRE -2016 576 -2016 208
WIRE -2016 576 -2080 576
WIRE -1984 576 -2016 576
WIRE -1744 576 -1920 576
WIRE -1584 576 -1664 576
WIRE -1376 576 -1376 496
WIRE -1376 576 -1504 576
WIRE -144 576 -144 480
WIRE 160 576 160 464
WIRE 160 576 -144 576
WIRE 480 624 480 432
WIRE -2752 720 -2880 720
WIRE -2432 720 -2528 720
WIRE -2416 720 -2416 448
WIRE -2416 720 -2432 720
WIRE -3280 768 -3280 368
WIRE -2880 768 -2880 720
WIRE -2880 768 -3280 768
WIRE -2752 800 -2848 800
WIRE -2464 800 -2528 800
WIRE -2416 800 -2464 800
WIRE -2336 800 -2416 800
WIRE -2752 880 -2848 880
WIRE -2336 880 -2528 880
WIRE -2848 912 -2848 880
WIRE -2336 912 -2336 880
WIRE -2464 928 -2464 800
WIRE -2464 1024 -2464 992
WIRE -2336 1024 -2336 992
WIRE -2848 1040 -2848 992
FLAG -2944 -256 0
FLAG -2816 -336 V+
FLAG -2944 -336 V-
FLAG -2816 -256 0
FLAG -2544 -16 V+
FLAG -1744 464 V-
FLAG -1744 96 V-
FLAG -1744 400 V+
FLAG -1744 32 V+
FLAG -1376 640 0
FLAG -1072 448 V+
FLAG -816 480 OUTPUT_shape+
IOPIN -816 480 Out
FLAG -2400 160 V+
FLAG -2832 160 0
FLAG -2864 80 trigger
IOPIN -2864 80 In
FLAG -2448 384 0
FLAG -2832 400 0
FLAG -2320 384 0
FLAG -1072 112 V+
FLAG -1072 176 V-
FLAG -1072 512 V-
FLAG -512 160 OUTPUT_shape-
IOPIN -512 160 Out
FLAG -656 128 V+
FLAG -656 192 V-
FLAG -736 240 0
FLAG -3232 -256 0
FLAG -3104 -336 V++
FLAG -3232 -336 V--
FLAG -3104 -256 0
FLAG -2416 80 vout_timer
FLAG -2160 576 vout_timer
FLAG -2080 576 Vout_timer
IOPIN -2080 576 Out
FLAG -2416 800 V+
FLAG -2848 800 0
FLAG -2464 1024 0
FLAG -2848 1040 0
FLAG -2336 1024 0
FLAG -2432 720 vout_timer2
FLAG 768 512 0
FLAG 1072 336 V+
FLAG 1488 352 V+
FLAG 1488 416 V-
FLAG 1408 464 0
FLAG 2224 384 0
FLAG 1072 400 V-
FLAG 2528 256 OUTPUT
IOPIN 2528 256 Out
FLAG -2880 720 trigger
IOPIN -2880 720 In
FLAG -3184 496 0
FLAG 480 704 0
SYMBOL voltage -2944 -352 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value -5
SYMBOL voltage -2816 -352 R0
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL res -2000 80 R0
SYMATTR InstName R1
SYMATTR Value 4.7k
SYMBOL res -2000 -32 R0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL polcap -1392 576 R0
WINDOW 3 24 56 Left 2
SYMATTR Value 1µ
SYMATTR InstName C1
SYMATTR Description Capacitor
SYMATTR Type cap
SYMATTR SpiceLine V=4 Irms=3.87298 Rser=0.015 Lser=0 mfg="KEMET" pn="A700X227M004ATE015" type="Al electrolytic"
SYMBOL res -1456 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 100
SYMBOL res -1360 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RvarD1
SYMATTR Value 0.5Meg
SYMBOL res -1504 320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 100
SYMBOL res -1376 320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RvarR1
SYMATTR Value 0.5Meg
SYMBOL res -1488 560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RvarA1
SYMATTR Value 0.5Meg
SYMBOL res -1648 560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 100
SYMBOL cap -2464 288 R0
SYMATTR InstName C2
SYMATTR Value 0.1µ
SYMBOL res -2848 256 R0
SYMATTR InstName Rset1
SYMATTR Value 500k
SYMBOL res -2336 144 R0
SYMATTR InstName Ra1
SYMATTR Value 1Meg
SYMBOL res -2336 256 R0
SYMATTR InstName Rb1
SYMATTR Value 681k
SYMBOL diode -1984 592 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N914
SYMBOL diode -1648 368 R0
SYMATTR InstName D2
SYMATTR Value 1N914
SYMBOL diode -1616 0 R0
SYMATTR InstName D3
SYMATTR Value 1N914
SYMBOL Opamps\\LT1366 -1072 80 R0
SYMATTR InstName U1
SYMBOL Opamps\\LT1366 -1072 416 R0
SYMATTR InstName U2
SYMBOL Opamps\\LT1366 -656 96 R0
SYMATTR InstName U3
SYMBOL res -592 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL res -752 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL SpecialFunctions\\LTC6993-2 -2624 160 R0
SYMATTR InstName U4
SYMBOL Opamps\\LT1366 -1744 0 R0
SYMATTR InstName U5
SYMBOL Opamps\\LT1366 -1744 368 R0
SYMATTR InstName U6
SYMBOL voltage -3232 -352 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value -15
SYMBOL voltage -3104 -352 R0
SYMATTR InstName V4
SYMATTR Value 15
SYMBOL cap -2480 928 R0
SYMATTR InstName C3
SYMATTR Value 0.1µ
SYMBOL res -2864 896 R0
SYMATTR InstName Rset2
SYMATTR Value 220k
SYMBOL res -2352 784 R0
SYMATTR InstName Ra2
SYMATTR Value 1Meg
SYMBOL res -2352 896 R0
SYMATTR InstName Rb2
SYMATTR Value 681k
SYMBOL SpecialFunctions\\LTC6993-2 -2640 800 R0
SYMATTR InstName U7
SYMBOL res 336 448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 3k
SYMBOL res 784 480 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R9
SYMATTR Value 100k
SYMBOL res 464 336 R0
SYMATTR InstName R10
SYMATTR Value 1k
SYMBOL Opamps\\LT1366 1072 304 R0
SYMATTR InstName U8
SYMBOL Opamps\\LT1366 1488 320 R0
SYMATTR InstName U9
SYMBOL res 1552 272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL res 1392 352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 1k
SYMBOL res 1792 320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 1k
SYMBOL res 2240 352 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R14
SYMATTR Value 100k
SYMBOL res 1920 208 R0
SYMATTR InstName R15
SYMATTR Value 1k
SYMBOL nmos 816 288 M0
SYMATTR InstName M1
SYMBOL nmos 2272 160 M0
SYMATTR InstName M2
SYMBOL voltage -3184 400 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value PULSE(0 3 50m 1p 1p 5 6 2)
SYMBOL voltage 480 608 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value SINE(0 3 440)
TEXT -1672 648 Left 2 ;ATTACK
TEXT -1736 304 Left 2 ;RELEASE
TEXT -1488 72 Left 2 ;DECAY
TEXT -1904 104 Left 2 ;SUSTAIN
TEXT -2352 -240 Left 2 ;pin SET is the Pulse Width Setting input
TEXT -2360 -336 Left 2 ;This version of LTC6993-2 is triggered on the rising  edge and retriggerable
TEXT -2360 -304 Left 2 ;(it allows the pulse width to be extended by additional trig signals)
TEXT -2352 -192 Left 2 ;pin OUT has a resistance of approx 30 ohm
TEXT -2352 -136 Left 2 ;the Ra and Rb are accurately chosen from LTC6993 datasheet table1
TEXT -3272 896 Left 2 !.options abstol=1e-10
TEXT -3264 928 Left 2 !.options cshunt=1e-15
TEXT -3578 948 Left 2 !.tran 12 uic
