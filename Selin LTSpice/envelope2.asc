Version 4
SHEET 1 4316 840
WIRE -352 -320 -912 -320
WIRE 32 -320 -176 -320
WIRE 80 -320 32 -320
WIRE 176 -320 160 -320
WIRE 32 -304 32 -320
WIRE 3328 -272 1488 -272
WIRE -176 -256 -176 -320
WIRE -144 -256 -176 -256
WIRE 672 -256 464 -256
WIRE 32 -240 -80 -240
WIRE 944 -240 880 -240
WIRE 1088 -240 1024 -240
WIRE -1104 -224 -1232 -224
WIRE -784 -224 -880 -224
WIRE -768 -224 -784 -224
WIRE -144 -224 -160 -224
WIRE 4016 -224 3488 -224
WIRE -352 -208 -352 -240
WIRE 464 -176 464 -256
WIRE 528 -176 464 -176
WIRE 672 -160 672 -256
WIRE 672 -160 592 -160
WIRE 784 -160 672 -160
WIRE 880 -160 880 -240
WIRE 880 -160 864 -160
WIRE 944 -160 880 -160
WIRE -1104 -144 -1200 -144
WIRE -816 -144 -880 -144
WIRE -768 -144 -816 -144
WIRE -688 -144 -768 -144
WIRE 256 -144 256 -320
WIRE 528 -144 256 -144
WIRE 1088 -144 1088 -240
WIRE 1088 -144 1008 -144
WIRE 1120 -144 1088 -144
WIRE 3856 -144 3568 -144
WIRE 944 -128 896 -128
WIRE -352 -112 -352 -128
WIRE -160 -112 -160 -224
WIRE -160 -112 -352 -112
WIRE -352 -96 -352 -112
WIRE -352 -96 -384 -96
WIRE 2560 -96 2032 -96
WIRE 4016 -96 4016 -224
WIRE 4016 -96 3920 -96
WIRE 3568 -80 3568 -144
WIRE -1104 -64 -1200 -64
WIRE -688 -64 -880 -64
WIRE 896 -64 896 -128
WIRE 3920 -64 3920 -96
WIRE 3920 -64 3904 -64
WIRE 4160 -48 3856 -48
WIRE -1200 -32 -1200 -64
WIRE -688 -32 -688 -64
WIRE 2816 -32 2608 -32
WIRE -816 -16 -816 -144
WIRE 2400 -16 2112 -16
WIRE 3088 -16 3024 -16
WIRE 3232 -16 3168 -16
WIRE 0 32 -192 32
WIRE 32 32 0 32
WIRE 160 32 112 32
WIRE 256 32 256 -144
WIRE 256 32 240 32
WIRE 2560 32 2560 -96
WIRE 2560 32 2464 32
WIRE 3328 32 3328 -272
WIRE 3488 32 3488 -224
WIRE 3488 32 3408 32
WIRE 2112 48 2112 -16
WIRE 2608 48 2608 -32
WIRE 2672 48 2608 48
WIRE 0 64 0 32
WIRE 2464 64 2464 32
WIRE 2464 64 2448 64
WIRE 2816 64 2816 -32
WIRE 2816 64 2736 64
WIRE 2928 64 2816 64
WIRE 3024 64 3024 -16
WIRE 3024 64 3008 64
WIRE 3088 64 3024 64
WIRE -816 80 -816 48
WIRE -688 80 -688 48
WIRE 2672 80 2400 80
WIRE 3232 80 3232 -16
WIRE 3232 80 3152 80
WIRE 3568 80 3568 0
WIRE 3568 80 3232 80
WIRE 3856 80 3856 32
WIRE -1200 96 -1200 48
WIRE 3088 96 3040 96
WIRE -192 112 -192 32
WIRE -144 112 -192 112
WIRE 800 112 448 112
WIRE 0 128 -80 128
WIRE -144 144 -784 144
WIRE 448 160 448 112
WIRE 528 160 448 160
WIRE 1872 160 1792 160
WIRE 2032 160 2032 -96
WIRE 2032 160 1952 160
WIRE 3040 160 3040 96
WIRE 800 176 800 112
WIRE 800 176 592 176
WIRE 816 176 800 176
WIRE 1488 176 1488 -272
WIRE 1488 176 816 176
WIRE 256 192 256 32
WIRE 528 192 256 192
WIRE 2400 208 2400 160
WIRE -528 272 -560 272
WIRE -448 272 -528 272
WIRE -384 272 -384 -96
WIRE -384 272 -448 272
WIRE -352 272 -384 272
WIRE -112 272 -288 272
WIRE 48 272 -32 272
WIRE 256 272 256 192
WIRE 256 272 128 272
WIRE 1488 272 1488 176
WIRE 1792 272 1792 160
WIRE 1792 272 1488 272
WIRE 2112 320 2112 128
WIRE -1120 416 -1248 416
WIRE -800 416 -896 416
WIRE -784 416 -784 144
WIRE -784 416 -800 416
WIRE -1120 496 -1216 496
WIRE -832 496 -896 496
WIRE -784 496 -832 496
WIRE -704 496 -784 496
WIRE -1120 576 -1216 576
WIRE -704 576 -896 576
WIRE -1216 608 -1216 576
WIRE -704 608 -704 576
WIRE -832 624 -832 496
WIRE -832 720 -832 688
WIRE -704 720 -704 688
WIRE -1216 736 -1216 688
FLAG -1312 -560 0
FLAG -1184 -640 V+
FLAG -1312 -640 V-
FLAG -1184 -560 0
FLAG -912 -320 V+
FLAG -112 160 V-
FLAG -112 -208 V-
FLAG -112 96 V+
FLAG -112 -272 V+
FLAG 256 336 0
FLAG 560 144 V+
FLAG 816 176 OUTPUT_shape+
IOPIN 816 176 Out
FLAG -768 -144 V+
FLAG -1200 -144 0
FLAG -1232 -224 trigger
IOPIN -1232 -224 In
FLAG -816 80 0
FLAG -1200 96 0
FLAG -688 80 0
FLAG 560 -192 V+
FLAG 560 -128 V-
FLAG 560 208 V-
FLAG 1120 -144 OUTPUT_shape-
IOPIN 1120 -144 Out
FLAG 976 -176 V+
FLAG 976 -112 V-
FLAG 896 -64 0
FLAG -1600 -560 0
FLAG -1472 -640 V++
FLAG -1600 -640 V--
FLAG -1472 -560 0
FLAG -784 -224 vout_timer
FLAG -528 272 vout_timer
FLAG -448 272 Vout_timer
IOPIN -448 272 Out
FLAG -784 496 V+
FLAG -1216 496 0
FLAG -832 720 0
FLAG -1216 736 0
FLAG -704 720 0
FLAG -800 416 vout_timer2
FLAG 2400 208 0
FLAG 2704 32 V+
FLAG 3120 48 V+
FLAG 3120 112 V-
FLAG 3040 160 0
FLAG 3856 80 0
FLAG 2704 96 V-
FLAG 2112 320 carrier_signal
IOPIN 2112 320 In
FLAG 4160 -48 OUTPUT
IOPIN 4160 -48 Out
FLAG -1248 416 trigger
IOPIN -1248 416 In
SYMBOL voltage -1312 -656 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value -5
SYMBOL voltage -1184 -656 R0
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL res -368 -224 R0
SYMATTR InstName R1
SYMATTR Value 4.7k
SYMBOL res -368 -336 R0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL polcap 240 272 R0
WINDOW 3 24 56 Left 2
SYMATTR Value 1µ
SYMATTR InstName C1
SYMATTR Description Capacitor
SYMATTR Type cap
SYMATTR SpiceLine V=4 Irms=3.87298 Rser=0.015 Lser=0 mfg="KEMET" pn="A700X227M004ATE015" type="Al electrolytic"
SYMBOL res 176 -336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 100
SYMBOL res 272 -336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RvarD1
SYMATTR Value 0.5Meg
SYMBOL res 128 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 100
SYMBOL res 256 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RvarR1
SYMATTR Value 0.5Meg
SYMBOL res 144 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RvarA1
SYMATTR Value 0.5Meg
SYMBOL res -16 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 100
SYMBOL cap -832 -16 R0
SYMATTR InstName C2
SYMATTR Value 0.1µ
SYMBOL res -1216 -48 R0
SYMATTR InstName Rset1
SYMATTR Value 500k
SYMBOL res -704 -160 R0
SYMATTR InstName Ra1
SYMATTR Value 1Meg
SYMBOL res -704 -48 R0
SYMATTR InstName Rb1
SYMATTR Value 681k
SYMBOL diode -352 288 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N914
SYMBOL diode -16 64 R0
SYMATTR InstName D2
SYMATTR Value 1N914
SYMBOL diode 16 -304 R0
SYMATTR InstName D3
SYMATTR Value 1N914
SYMBOL Opamps\\LT1366 560 -224 R0
SYMATTR InstName U1
SYMBOL Opamps\\LT1366 560 112 R0
SYMATTR InstName U2
SYMBOL Opamps\\LT1366 976 -208 R0
SYMATTR InstName U3
SYMBOL res 1040 -256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL res 880 -176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL SpecialFunctions\\LTC6993-2 -992 -144 R0
SYMATTR InstName U4
SYMBOL Opamps\\LT1366 -112 -304 R0
SYMATTR InstName U6
SYMBOL Opamps\\LT1366 -112 64 R0
SYMATTR InstName U7
SYMBOL voltage -1600 -656 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value -15
SYMBOL voltage -1472 -656 R0
SYMATTR InstName V4
SYMATTR Value 15
SYMBOL cap -848 624 R0
SYMATTR InstName C5
SYMATTR Value 0.1µ
SYMBOL res -1232 592 R0
SYMATTR InstName Rset2
SYMATTR Value 220k
SYMBOL res -720 480 R0
SYMATTR InstName Ra2
SYMATTR Value 1Meg
SYMBOL res -720 592 R0
SYMATTR InstName Rb2
SYMATTR Value 681k
SYMBOL SpecialFunctions\\LTC6993-2 -1008 496 R0
SYMATTR InstName U8
SYMBOL res 1968 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 3k
SYMBOL res 2416 176 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R9
SYMATTR Value 100k
SYMBOL res 2096 32 R0
SYMATTR InstName R10
SYMATTR Value 1k
SYMBOL Opamps\\LT1366 2704 0 R0
SYMATTR InstName U5
SYMBOL Opamps\\LT1366 3120 16 R0
SYMATTR InstName U9
SYMBOL res 3184 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL res 3024 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 1k
SYMBOL res 3424 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 1k
SYMBOL res 3872 48 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R14
SYMATTR Value 100k
SYMBOL res 3552 -96 R0
SYMATTR InstName R15
SYMATTR Value 1k
SYMBOL nmos 2448 -16 M0
SYMATTR InstName M1
SYMBOL nmos 3904 -144 M0
SYMATTR InstName M2
TEXT -40 344 Left 2 ;ATTACK
TEXT -104 0 Left 2 ;RELEASE
TEXT 144 -232 Left 2 ;DECAY
TEXT -272 -200 Left 2 ;SUSTAIN
TEXT -720 -544 Left 2 ;pin SET is the Pulse Width Setting input
TEXT -728 -640 Left 2 ;This version of LTC6993-2 is triggered on the rising  edge and retriggerable
TEXT -728 -608 Left 2 ;(it allows the pulse width to be extended by additional trig signals)
TEXT -720 -496 Left 2 ;pin OUT has a resistance of approx 30 ohm
TEXT -720 -440 Left 2 ;the Ra and Rb are accurately chosen from LTC6993 datasheet table1
